/*! tinyscrollbar - v2.1.6 - 2014-05-12
 * http://www.baijs.com/tinyscrollbar
 *
 * Copyright (c) 2014 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b,e){function f(){return r.update()}function g(){q.css(x,r.contentPosition/r.trackRatio),n.css(x,-r.contentPosition),o.css(w,r.trackSize),m.css(w,r.trackSize),p.css(w,r.trackSize),q.css(w,r.thumbSize)}function h(){u?m[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),i(a.touches[0],!0))}:(q.on("mousedown",i),p.on("mousedown",k)),r.options.resizeUpdate&&a(window).resize(function(){r.update(r.options.scrollTo)}),r.options.wheel&&window.addEventListener?b[0].addEventListener(v,j,!1):r.options.wheel&&(b[0].onmousewheel=j)}function i(b,c){c||b.stopPropagation(),a("body").addClass("noSelect"),s=t?b.pageX:b.pageY,r.thumbPosition=parseInt(q.css(x),10)||0,u?(document.ontouchmove=function(a){a.preventDefault(),a.stopPropagation(),k(a.touches[0])},document.ontouchend=l):(a(document).on("mousemove",k),a(document).on("mouseup",l),q.on("mouseup",l))}function j(c){if(isTouch||c.stopPropagation(),r.contentRatio<1){var d=c||window.event,e="delta"+r.options.axis.toUpperCase(),f=-(d[e]||d.detail||-1/3*d.wheelDelta)/40;r.contentPosition-=f*r.options.wheelSpeed,r.contentPosition=Math.min(r.contentSize-r.viewportSize,Math.max(0,r.contentPosition)),b.trigger("move"),q.css(x,r.contentPosition/r.trackRatio),n.css(x,-r.contentPosition),(r.options.wheelLock||r.contentPosition!==r.contentSize-r.viewportSize&&0!==r.contentPosition)&&(d=a.event.fix(d),d.preventDefault()),"function"==typeof r.options.scrollCallback&&r.options.scrollCallback(r.contentPosition)}}function k(a){if(r.contentRatio<1){var c=t?a.pageX:a.pageY,d=c-s;r.options.scrollInvert&&u&&(d=s-c);var e=Math.min(r.trackSize-r.thumbSize,Math.max(0,r.thumbPosition+d));r.contentPosition=e*r.trackRatio,b.trigger("move"),q.css(x,e),n.css(x,-r.contentPosition)}}function l(){a("body").removeClass("noSelect"),a(document).unbind("mousemove",k),a(document).unbind("mouseup",l),q.unbind("mouseup",l),document.ontouchmove=document.ontouchend=null,"function"==typeof r.options.scrollCallback&&r.options.scrollCallback(r.contentPosition)}this.options=a.extend({},d,e),this._defaults=d,this._name=c,this._className=this.options.prefix+"scrollbar",b.hasClass(this._className)||b.addClass(this._className);var m,n,o,p,q,r=this,s=0,t="x"===this.options.axis,u="ontouchstart"in document.documentElement,v="onwheel"in document||document.documentMode>=9?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",w=t?"width":"height",x=t?"left":"top";return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.render=function(){if(!b.children(".scroll").length){var a=b.height()||b.parent().height();b.wrapInner('<div class="overview">').wrapInner('<div class="viewport" style="height:'+a+'px;">').prepend('<div class="scroll disable"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>')}return m=b.children(".viewport"),n=m.children(".overview"),o=b.children(".scroll"),p=o.children(".track"),q=p.children(".thumb"),this},this.update=function(a){this.render();var c=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase(),d=n.prop("scroll"+c);if(!d)return r;switch(this.contentSize=d,this.viewportSize=b[w](),this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,o.toggleClass("disable",this.contentRatio>=1||!this.contentSize),"undefined"==typeof a&&(a=this.options.scrollTo),a){case"top":this.contentPosition=0;break;case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(this.contentSize-this.viewportSize,Math.max(0,this.contentPosition));break;default:this.contentPosition=this.contentRatio>=1?0:parseInt(a,10)||0}return g(),h(),r},f()}var c="tinyscrollbar",d={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1,prefix:"",resizeUpdate:!1,scrollCallback:null,scrollTo:"relative",thumbSizeMin:20};a.fn[c]=function(d){return this.each(function(){var e=a.data(this,"plugin_"+c);e?e.update():a.data(this,"plugin_"+c,new b(a(this),d))})},a.fn[c+"Update"]=function(b){var d=a(this),e=d.data("plugin_"+c);return e?e.update(b):d[c]()}});